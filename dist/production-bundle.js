(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var n,o,r,a,c,l,i,u;c=document.querySelector("#timer-hours"),l=document.querySelector("#timer-minutes"),i=document.querySelector("#timer-seconds"),u=setInterval((function(){var e,t,n,o=(e=(new Date("7 april 2021 19:40:00").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t});o.hours<10&&o.hours>=0&&(o.hours="0"+o.hours),o.minutes<10&&o.minutes>=0&&(o.minutes="0"+o.minutes),o.seconds<10&&o.seconds>=0&&(o.seconds="0"+o.seconds),c.textContent=o.hours,l.textContent=o.minutes,i.textContent=o.seconds,o.timeRemaining<=0&&(clearInterval(u),c.textContent="00",l.textContent="00",i.textContent="00")}),1e3),a=document.querySelector("menu"),document.addEventListener("click",(function(e){e.target.classList.contains("menu")||(e.target.closest(".menu")&&a.classList.add("active-menu"),e.target.classList.contains("close-btn")&&e.target.closest(".close-btn")&&a.classList.remove("active-menu"),e.target.matches("ul>li")||e.target.closest("ul>li")&&a.classList.remove("active-menu"))})),function(){var e,t=document.querySelector(".popup"),n=t.querySelector(".popup-content"),o=document.querySelectorAll(".popup-btn"),r=document.documentElement.clientWidth,a=100;r>768?o.forEach((function(n){n.addEventListener("click",(function(){t.style.display="block",a=100,e=requestAnimationFrame(c)}))})):o.forEach((function(e){e.addEventListener("click",(function(){t.style.display="block"}))})),t.addEventListener("click",(function(e){var n=e.target;n.classList.contains("popup-close")?t.style.display="none":(n=n.closest(".popup-content"))||(t.style.display="none")}));var c=function t(){e=requestAnimationFrame(t),--a>10?n.style.top=a+"%":a<10?n.style.top="11%":cancelAnimationFrame(e)}}(),n=document.querySelector(".service-header"),o=n.querySelectorAll(".service-header-tab"),r=document.querySelectorAll(".service-tab"),n.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&o.forEach((function(e,n){e===t&&function(e){for(var t=0;t<r.length;t++)e===t?(o[t].classList.add("active"),r[t].classList.remove("d-none")):(o[t].classList.remove("active"),r[t].classList.add("d-none"))}(n)}))})),function(){var t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-content"),o=document.querySelector("#portfolio").querySelector(".portfolio-dots"),r=new(function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.elem=e,this.newClass=n}var n,r;return n=t,(r=[{key:"addNewClass",value:function(){this.elem=document.createElement("li"),this.elem.classList.add("dot"),o.append(this.elem)}}])&&e(n.prototype,r),t}());t.forEach((function(e){e&&r.addNewClass()})),document.querySelectorAll(".dot")[0].classList.add("dot-active");var a,c=0,l=function(e,t,n){e[t].classList.remove(n)},i=function(e,t,n){e[t].classList.add(n)},u=function(){var e=document.querySelectorAll(".dot");l(t,c,"portfolio-item-active"),l(e,c,"dot-active"),++c>=t.length&&(c=0),i(t,c,"portfolio-item-active"),i(e,c,"dot-active")},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;a=setInterval(u,e)};n.addEventListener("click",(function(e){var n=document.querySelectorAll(".dot");e.preventDefault();var o=e.target;o.matches(".portfolio-btn, .dot")&&(l(t,c,"portfolio-item-active"),l(n,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&n.forEach((function(e,t){e===o&&(c=t)})),c>=t.length&&(c=0),c<0&&(c=t.length-1),i(t,c,"portfolio-item-active"),i(n,c,"dot-active"))})),n.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s()})),s(1500)}(),document.querySelectorAll(".command__photo").forEach((function(e){var t=e.src;e.addEventListener("mouseenter",(function(e){e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(function(e){e.target.src=t}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelectorAll(".calc-item"),n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),c=document.getElementById("total"),l=document.querySelector(".calc-count"),i=function(){var t,n=1,i=1,u=o.options[o.selectedIndex].value,s=+r.value;l.value>1&&(n+=(l.value-1)/10),a.value&&a.value<5?i*=2:a.value&&a.value<10&&(i*=1.5),t=u&&s?e*u*s*n*i:0,c.textContent=Math.floor(t)};n.addEventListener("change",(function(e){var t=e.target;(t.matches(".calc-type")||t.matches(".calc-square")||t.matches(".calc-day")||t.matches(".calc-count"))&&i()})),t.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/\D\./gi,"")}))}))}(100),function(){var e=document.querySelectorAll('form[name="user_form"]'),n=document.createElement("div");n.style.cssText="font-size: 2rem;\n    color: #fff;";var o=!1,r=!1,a=!1,c=!1;document.querySelectorAll(".form-name").forEach((function(e){e.addEventListener("input",(function(e){var t=e.target;t.value=t.value.replace(/[^а-яА-ЯёЁ\s\-]/g,"")})),e.addEventListener("blur",(function(e){var t=e.target;t.value=t.value.replace(/\s+/g," ").replace(/\-+/g,"-").replace(/^-+|-+$/g,"").trim(),t.value.length<=1?t.value="":(t.value=t.value.split(/\s+/).map((function(e){return e[0].toUpperCase()+e.substring(1)})).join(" "),o=!0)}))})),document.querySelectorAll(".form-email").forEach((function(e){e.addEventListener("input",(function(t){var n=t.target;n.value=n.value.replace(/[^a-zA-Z@_.!\-]/g,"").replace(/^[@_.!`*']/g,"").trim();var o=/^\D+\@\D+\.\D{1,3}/gm.exec(n.value);console.log(o),null!==o?(r=!0,e.setCustomValidity("")):(r=!1,e.setCustomValidity("неверный ввод, попробуйте один из следующих форматов ввода: sobaka@gmail.com или sobaka@mail.ru"))})),e.addEventListener("blur",(function(e){var t=e.target;t.value=t.value.replace(/[^a-zA-Z@_.!`*'\-]/g,"").replace(/\s+/g," ").replace(/\-+/g,"-").trim()})),e.setAttribute("required",!0)})),document.querySelectorAll(".form-phone").forEach((function(e){e.addEventListener("input",(function(n){var o,r=n.target;r.value=r.value.replace(/[^\d()\-+]|([()\-\+])(?=\1)/g,"").replace(/^[()]/g,"").replace(/^(\+)(\d+?)([^0-9-()])+/g,(function(e,t,n){return t+n})).trim(),(o=r.value,function(e){if(Array.isArray(e))return t(e)}(o)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(o)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e,t){"+"===e&&t>0&&(r.value=r.value.slice(0,t))}));var c=/^\+?[78]+[\-\(]?(\d{3})[\-\)]?(\d{3})[-]?(\d{2})[-]?(\d{2})$/g.exec(r.value);console.log(c),null===c?(a=!1,e.setCustomValidity("неверный ввод, попробуйте один из следующих форматов ввода: 81231231212 или +71231231212 или 8(123)1233265 или 8-123-123-12-12 или +7(123)123-12-12 или 8(123)123-12-12 или +7123-123-12-12")):(r.value=r.value.replace(/^\+?[78]+[\-\(]?(\d{3})[\-\)]?(\d{3})[-]?(\d{2})[-]?(\d{2})$/gm,"+7($1)$2-$3-$4").trim(),a=!0,e.setCustomValidity(""))}))}));var l=document.querySelector(".mess");l.addEventListener("input",(function(){l.value=l.value.replace(/[^а-яА-ЯёЁ\s\-\,\.\!]/g,""),l.value===/[^а-яА-ЯёЁ\s\-\,\.\!]/g&&(c=!0)})),l.addEventListener("blur",(function(){l.value=l.value.replace(/\s+/g," ").replace(/\-+/g,"-").replace(/^-+|-+$/g,"").replace(/[А-Я]/g,(function(e){return e.toLowerCase()})).replace(/^[а-я]/g,(function(e){return e.toUpperCase()})).trim()})),e.forEach((function(e){e.addEventListener("submit",(function(t){if(t.preventDefault(),console.log("валидность имени: "+o),console.log("валидность тел.: "+a),console.log("валидность мыла: "+r),o&&a&&r||o&&a&&r&&c){e.appendChild(n),n.textContent="Загрузка...";var l=new FormData(e);i(l).then((function(e){if(200!==e.status)throw new Error("status network not 200.");n.textContent="Спасибо! Мы скоро с вами свяжемся",setTimeout((function(){n.remove()}),3e3),document.querySelectorAll("input").forEach((function(e){e.value=""}))})).catch((function(e){n.textContent="Что-то пошло не так...",setTimeout((function(){n.remove()}),3e3),console.error(e)}))}else console.log("не передалось")}))}));var i=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:e})}}()})();